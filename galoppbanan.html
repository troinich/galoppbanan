<html>
<script>

    
var leaderPosition = 0;
const distance = 20;
    
    // Skapa fyra hästar (objekt från constructorn Racehorse)
//var horse1 = new Racehorse(1);
//var horse2 = new Racehorse(2);
//var horse3 = new Racehorse(3);
//var horse4 = new Racehorse(4);
    
    
    function createHorses(num) {
        var horses = [];
        for (let i = 0; i < num; i++) {
            var horse = new Racehorse (i+1);
            horses.push(horse);
        }
        return horses;
    }
    var allHorses = createHorses(3);
    
// Samla ihop alla hästar i ett stall.
//var allHorses = [horse1, horse2, horse3, horse4];
    
// En funktion (constructor) som är till för att skapa hästar.
function Racehorse(number) {
  this.number = number;
  this.position = 0;
}
    
 /*   function moveHorses() {
        allHorses.forEach(function(horse){
            let slump =  Math.floor(Math.random() * 3); //тому що три - максимальне значення м'яча

            horse.position += slump;
    
    })
    }  */
    
   var holes = [3, 3, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 0];
    
    function moveHorses() {
        allHorses.forEach(function(horse) {
            let slump = holes[(Math.random() * 17) | 0];
                        horse.position += slump;
        })
    }


    // контролює, чи хтось виграв
while (leaderPosition < distance) {
    // Rulla bollarna i hål
    moveHorses();
    
    // Skriv ut hur hästarna ligger till.
allHorses.forEach(function(horse){
    console.log("Häst " + horse.number + ":" + horse.position + "\n");
        if (horse.position > leaderPosition) {
            leaderPosition = horse.position;
    }
    
});
    
}
    
// Sortera Hastarna efter deras leaderPosition
    
    allHorses.sort(function(a,b) {
        if (a.position < b.position) return 1;
        if (a.position > b.position) return -1;
    });
    
    console.log(allHorses);
    
    console.log("The winner is Horse number " + allHorses[0].number);
</script>
</html>